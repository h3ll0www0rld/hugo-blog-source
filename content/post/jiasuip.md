---
title: '我的世界加速ip搭建及避坑'
date: 2023-07-21T10:42:09+08:00
draft: true
tags:
    - Minecraft
    - 网络通讯
---
### 前言
希望您能认真看完这篇文章，花不了您多长时间，因为即使您不搭建加速ip这也能在挑选加速ip这方面对您有帮助。


<!--more-->
### 劝退环节
在搭建一个加速ip前，你要知道以下事项：
1. 搭建私人加速ip将用到非常多的money，一般来说，现在市面上比较稳定的加速ip供应商的加速ip的价格在10-20r/m，这属于中等价位的，加速效果上海这边在170-180ms左右，丢包率适中，而你用相同的价格去搭建自己的私人加速ip的话，延迟大概在200ms左右，丢包率较高。所以，如果不是有特殊需求，建议用现成的ip就行。
2. 搭建需要一定网络知识基础。

自己搭建加速ip面向的对象：
1. 对游戏延迟和丢包率有极高要求的主播或者游戏玩家。
2. 希望自己搭建加速渠道的工会。
3. 对落地ip有要求的玩家（可以绕过21级安全警报）。
4. ~~喜欢折腾的极客。~~


### 搭建前须知
首先，我们需要明白我们为什么需要一个加速ip，以及加速ip到底加速了什么。

通常来讲，由于国内的网络审查制度，以及mc游戏连接时采用tcp协议这一老旧的协议（目前主流游戏为udp协议，相对更快，延迟更低），tcp协议过墙时是要接受审查的，所以我们在连接国外服务器普遍会出现延迟较高、丢包率高的现象。~~（如果你是王思聪那样自己拉条专线的富哥另谈）~~

因此，我们需要一些对国内网络有优化的服务器来作为我们和hyp或其他服务器之间连接的中转，从而达到降低延迟、丢包率的效果。

差不多是这么个流程：
你 [发包] -> [接收] 中转服务器 [发包] -> [接收] hyp服务器 [发包] -> [接收] 中转服务器 [发包] -> [接收] 你

还记得我在第一个板块提到的一个问题吗？那就是为什么大部分廉价服务器明明我ping过去延迟很低，可是加速效果就是不好。这是因为他们线路的问题。

以下是目前主流的线路：
1. CN2（延迟低，稳定性高，价格适中）
2. BGP（延迟适中，稳定性适中，价格偏低）
3. IPLC/IEPL（延迟极低，稳定性极高，价格十分贵）
4. 大厂优化线路（稳定性和延迟接近于CN2，价格较高）

CN2线路是一种优质线路，但仍存在不小的丢包率，且晚高峰（一般指晚上8:00以后）还是会卡，所以不建议全段使用CN2。
BGP的优点在于可以自动选择线路，多国内多地优化较好，建议作为落地使用。
IPLC/IEPL属于私人内网线路，也就是说它并不会和其它线路走一条通道，而是走自己的VIP通道，因此延迟低，丢包率也低，但是价格十分昂贵，因此被称作土豪线路，如果你是富哥可以全段使用，不是的话就过墙时使用。
大厂的优化线路主要是因为他们在全球各地都有节点，节点和节点间走的是内网，因此延迟和丢包率较低（不过还是比不上内网线路）。
注意，大厂一般是指国内大厂，国外例如aws，gcp等对国内优化并不好，甚至还会出现墙ip的现象。

价格一览：
1. CN2 1H1G 49.99＄/Y（参考知名服务器提供商搬瓦工）
2. BGP 1H1G 15R/Y（参考DogYun狗云）
3. IPLC/IEPL 没什么推荐的，一般来说1H1G一个月70r是基础，低于这个价格的千万不要信
4. 大厂优化线路 腾讯云上海部分地区29r/m

这里还需要提及一种非常特别的加速方式，那就是流量转发。

先做个科普，流量转发与我们常说的cdn是有区别的。流量转发可以转发tcp/udp协议的所有流量，而cdn只能转发web socket协议下的流量。

回到正题，之前腾讯推出过anycast服务，当时据说有人就是用这个来搭建加速ip的，效果不错，可是后来hyp增加了对落地ip的检测（即会检测你连接hyp服务器时地址一栏是否填写的时XXX.hypixel.net），加速ip可以通过部署在服务器上的加速ip程序来绕过这一限制，而anycast就不行了，所以这条路就只能用于作为连接加速的一种手段，不能直接搭建加速ip。

### 加速ip搭建
自己去搜教程，B站有很多。这里我就简单地提一嘴。
在加速ip搭建选用的程序方面，我推荐贴吧蜡油的ZBProxy，在github上开源。
repo：https://github.com/layou233/ZBProxy
根据你的vps的型号，在action里下载最新的构建版本。
然后上传到你的vps，输入：
```
chmod +x ./ZBProxy-linux-XXX
./ZBProxy-linux-XXX
```
./ZBProxy-linux-XXX就是你的文件名
如果你想让ZBProxy在后台运行时留下log，你就可以将第二行代码改为：
```
nohup ./ZBProxy-linux-XXX
```
没有nohup自行安装

### 一些常见的误区解答
Q1: 延迟最低是不是就是最好的？
A1: 并不是，可以参考澳洲的youtuber jqsie zolkers等，他们延迟普遍在200ms，但他们打得很好，这是因为他们丢包率低。（从某种意义上来说，高延迟甚至还有优势，可以降低一定的kb。）

Q2: 为什么私人ip能绕过21级安全警报？
A2: 因为hyp会对新登陆的账号进行审查，如果发现你登陆所用的ip（也就是你的云服务器的ip）曾经有人开过g，那么就会将你的账号封禁。因此，大部分加速器、加速ip的公共线路（公共线路指的是多个人共用的一条线路，一般即使私人加速ip如无特别说明也是公共线路），新玩家登陆都会有被封禁的情况。而私人的云服务器就不会有这种状况，因为大多ip都是干净的。

Q3：梯子可以当加速器用吗？
A3：虽然这是碰都不能碰的话题，但我还是回答一下：不可以，iplc线路的也不可以，延迟普遍200ms+，毫无加速效果。